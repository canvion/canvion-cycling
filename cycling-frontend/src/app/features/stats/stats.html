<div class="layout">

  <!-- Sidebar -->
  <app-sidebar></app-sidebar>

  <!-- Contenido principal -->
  <main class="main">

    <div class="top-bar">
      <h1>游늳 Estad칤sticas avanzadas</h1>
      <p class="subtitle">An치lisis detallado de tus entrenamientos</p>
    </div>

    <app-spinner *ngIf="isLoading"></app-spinner>

    <div *ngIf="!isLoading">

      <!-- Km por semana -->
      <div class="chart-card">
        <h2>Kil칩metros por semana <span class="hint">(칰ltimas 8 semanas)</span></h2>
        <div class="bar-chart">
          <div class="bar-group" *ngFor="let value of weekData; let i = index">
            <div class="bar-wrap">
              <span class="bar-num">{{ value }}</span>
              <div class="bar" [style.height.%]="value === 0 ? 2 : (value / maxWeekKm) * 100"></div>
            </div>
            <span class="bar-label">{{ weekLabels[i] }}</span>
          </div>
        </div>
      </div>

      <!-- Km por mes -->
      <div class="chart-card">
        <h2>Kil칩metros por mes <span class="hint">(칰ltimos 6 meses)</span></h2>
        <div class="bar-chart">
          <div class="bar-group" *ngFor="let value of monthKmData; let i = index">
            <div class="bar-wrap">
              <span class="bar-num">{{ value }}</span>
              <div class="bar bar-orange" [style.height.%]="value === 0 ? 2 : (value / maxMonthKm) * 100"></div>
            </div>
            <span class="bar-label">{{ monthLabels[i] }}</span>
          </div>
        </div>
      </div>

      <!-- Actividades por d칤a de la semana -->
      <div class="chart-card">
        <h2>쯈u칠 d칤as sales m치s? <span class="hint">(actividades por d칤a)</span></h2>
        <div class="bar-chart">
          <div class="bar-group" *ngFor="let value of dayData; let i = index">
            <div class="bar-wrap">
              <span class="bar-num">{{ value }}</span>
              <div class="bar bar-green" [style.height.%]="value === 0 ? 2 : (value / maxDayCount) * 100"></div>
            </div>
            <span class="bar-label">{{ dayLabels[i] }}</span>
          </div>
        </div>
      </div>

      <!-- Cadencia por mes -->
      <div class="chart-card" *ngIf="maxCadence > 1">
        <h2>Cadencia media por mes <span class="hint">(rpm)</span></h2>
        <div class="bar-chart">
          <div class="bar-group" *ngFor="let value of cadenceData; let i = index">
            <div class="bar-wrap">
              <span class="bar-num">{{ value > 0 ? value : '' }}</span>
              <div class="bar bar-purple" [style.height.%]="value === 0 ? 2 : (value / maxCadence) * 100"></div>
            </div>
            <span class="bar-label">{{ cadenceLabels[i] }}</span>
          </div>
        </div>
      </div>

    </div>

  </main>
</div>
