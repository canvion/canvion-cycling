<div class="layout">

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-logo">ğŸš´ Canvion</div>
    <nav>
      <a routerLink="/dashboard" class="nav-item">ğŸ“Š Dashboard</a>
      <a routerLink="/activities" class="nav-item">ğŸƒ Actividades</a>
      <a routerLink="/records" class="nav-item">ğŸ† RÃ©cords</a>
      <a routerLink="/stats" class="nav-item active">ğŸ“ˆ EstadÃ­sticas</a>
    </nav>
    <div class="sidebar-bottom">
      <span class="sidebar-user">ğŸ‘¤ {{ username }}</span>
      <button class="btn-logout" (click)="logout()">Salir</button>
    </div>
  </aside>

  <!-- Contenido principal -->
  <main class="main">

    <div class="top-bar">
      <h1>ğŸ“ˆ EstadÃ­sticas avanzadas</h1>
      <p class="subtitle">AnÃ¡lisis detallado de tus entrenamientos</p>
    </div>

    <app-spinner *ngIf="isLoading"></app-spinner>

    <div *ngIf="!isLoading">

      <!-- Km por semana -->
      <div class="chart-card">
        <h2>KilÃ³metros por semana <span class="hint">(Ãºltimas 8 semanas)</span></h2>
        <div class="bar-chart">
          <div class="bar-group" *ngFor="let value of weekData; let i = index">
            <div class="bar-wrap">
              <span class="bar-num">{{ value }}</span>
              <div class="bar" [style.height.%]="value === 0 ? 2 : (value / maxWeekKm) * 100"></div>
            </div>
            <span class="bar-label">{{ weekLabels[i] }}</span>
          </div>
        </div>
      </div>

      <!-- Km por mes -->
      <div class="chart-card">
        <h2>KilÃ³metros por mes <span class="hint">(Ãºltimos 6 meses)</span></h2>
        <div class="bar-chart">
          <div class="bar-group" *ngFor="let value of monthKmData; let i = index">
            <div class="bar-wrap">
              <span class="bar-num">{{ value }}</span>
              <div class="bar bar-orange" [style.height.%]="value === 0 ? 2 : (value / maxMonthKm) * 100"></div>
            </div>
            <span class="bar-label">{{ monthLabels[i] }}</span>
          </div>
        </div>
      </div>

      <!-- Actividades por dÃ­a de la semana -->
      <div class="chart-card">
        <h2>Â¿QuÃ© dÃ­as sales mÃ¡s? <span class="hint">(actividades por dÃ­a)</span></h2>
        <div class="bar-chart">
          <div class="bar-group" *ngFor="let value of dayData; let i = index">
            <div class="bar-wrap">
              <span class="bar-num">{{ value }}</span>
              <div class="bar bar-green" [style.height.%]="value === 0 ? 2 : (value / maxDayCount) * 100"></div>
            </div>
            <span class="bar-label">{{ dayLabels[i] }}</span>
          </div>
        </div>
      </div>

    </div>

  </main>
</div>
